# Closest 프로젝트

- rss를 사용하여 관심 블로그를 커스텀하게 관리할 수 있는 어플리케이션입니다.


# AC 리스트
- 사용자는 자신이 원하는 블로그 RSS를 구독할 수 있다. 
- 사용자는 구독한 블로그를 구독 취소할 수 있다.
- 사용자가 구독한 블로그는 메인화면에 그래프 형식으로 표현된다.
- 그래프 노드에 마우스 오버하면 해당 블로그에 최근 등록 글이 목록으로 보인다.
- 최근 등록 글을 클릭하면 해당 링크를 새창으로 띄운다.
- 구독한 블로그에서 새 글이 발행되면 그래프에서 확인할 수 있다.
- 자주 방문한 블로그 순으로 그래프의 중심에 위치하게 된다.
- 화면 오른쪽 끝으로 마우스를 가져가면 로그인 창이 보인다.
- 사용자가 로그인 성공하면 엑세스 토큰과 리프레시 토큰이 발급된다.
- 엑세스 토큰은 30분, 리프레시 토큰은 1일의 유효시간을 갖는다. 
- 리프레시 토큰이 유효하면 엑세스 토큰은 자동으로 재발급 된다.

# 도메인 다이어그램

<img width="813" alt="image" src="https://github.com/user-attachments/assets/5371944e-6647-43a3-aec7-acf5cede4cc7">


# 인증

## 토큰 처리 방식

### 토큰 생성

- 로그인 또는 인증이 성공하면, 서버는 엑세스 토큰과 리프레시 토큰을 생성하고 이를 쿠키에 담아 응답합니다.

### 토큰 인증

- 사용자가 보호된 엔드포인트에 접근하려면, 엑세스 토큰을 헤더에 담아 요청해야 합니다.

### 토큰 갱신

- 엑세스 토큰의 유효 기간이 만료되면, 클라이언트는 쿠키에 저장된 리프레시 토큰을 사용하여 다시 서버에 인증을 요청합니다. 서버는 새로운 엑세스 토큰을 생성하고 이를 쿠키에 담아 응답합니다.

# 클래스 구조 및 설명

## Feed, FeedItem

- rss에서 전달받은 SyndEntry와 SyndFeed의 기능을 외부 노출 하지 않기 위해 private 필드로 받고
- Feed, FeedItem 인터페이스로 사용할 기능만 외부 노출시킴
- 상속을 하지 않아 불필요하게 SyndEntry나 SyndFeed의 타입으로 받게 될 경우를 차단

## UserDetails

![](uml/userDetails.png)

# 검증 방식

## 표현 계층 검증

- 표현 계층에서는 사용자 입력값을 검증한다.

## 서비스 계층 검증

- DB 조회 혹은 외부 호출이 필요한 검증은 서비스에서 검증한다.

# DTO

- Request와 Response DTO를 구분한다.
- 서비스 모듈의 재사용성을 위해 표현 계층의 DTO와 서비스 계층의 DTO를 구분한다.
- 서비스 계층의 DTO는 어미에 ServiceRequest, ServiceResponse라고 명명한다.
